<html lang="en">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
        <link rel="stylesheet" href="./call-notes-log.css">
        <title>SSSIHMS-AIT Call Notes</title>
        <script>
            var cacheVariable = 0; 
            function Notes() {
                let callNotes = document.getElementById('callNotes');
                let language = document.getElementById('language').value;
                let FROM1 = document.getElementById("FROM1").value;
                let FROM2 = document.getElementById("FROM2").value;
                let patientName = document.getElementById('patientName').value;
                let age = document.getElementById('age').value;
                let gender = document.getElementById('gender').value;
                let attender = document.getElementById('attender').value;
                let relation = document.getElementById('relation').value;
                let hospitalID = document.getElementById('hospitalID').value;
                let SHDID = document.getElementById('SHDID').value;
                let place = document.getElementById('place').value;
                let phoneNumber = document.getElementById('phoneNumber').value;
                let emailID = document.getElementById('emailID').value;
                let department = document.getElementById('department').value;
                let symptoms = document.getElementById('symptoms').value;
                let response = document.getElementById('response').value;
                let resolution = document.getElementById('resolution').value;
                callNotes.innerHTML = 'Language: ' + language + ';    '
                                        +'FROM ' + FROM2 + ' ' + FROM1 + ';    '
                                        +'Name of patient: ' + patientName + '; '
                                        +'Age ' + age + '; '
                                        +'Gender ' + gender + ';  '
                                        +'Attendant Name: ' + attender + ';  '
                                        +'Relation: ' + relation + ';    '
                                        +'Hospital ID: ' + hospitalID + '; '
                                        +'SHD ID: ' + SHDID + ';  '
                                        +'Place: ' + place + ';   '
                                        +'PHONE: ' + phoneNumber + ';   '
                                        +'Email id: ' + emailID + ';    '
                                        +'INFORMATION' + '; '
                                        +'DEPARTMENT: ' + department + ';  '
                                        +'Symptoms: ' + symptoms + ';    '
                                        +'RESPONSE: ' + response + ';    '
                                        +'RESOLUTION: '+ resolution;                         
            };                                      
            function update() {
                Notes()
            };
            function copyNotes() {
                let callNotes = document.getElementById('callNotes');
                callNotes.select();
                document.execCommand('copy');
                document.getElementById('callNotes').blur();
            };
            function clearEntries() {
                document.getElementById('language').value = "none";
                document.getElementById("FROM1").value = "none";
                document.getElementById("FROM2").value = "none";
                document.getElementById('patientName').value = '';
                document.getElementById('age').value = '';
                document.getElementById('gender').value = '';
                document.getElementById('attender').value = '';
                document.getElementById('relation').value = '';
                document.getElementById('hospitalID').value = '';
                document.getElementById('SHDID').value = '';
                document.getElementById('place').value = '';
                document.getElementById('phoneNumber').value = '';
                document.getElementById('emailID').value = '';
                document.getElementById('department').value = "none";
                document.getElementById('symptoms').value = '';
                document.getElementById('response').value = '';
                document.getElementById('resolution').value = "none";
                update();
            };
            function copyCacheNotes(notesID) {
                var r = document.createRange();
                r.selectNode(document.getElementById(notesID));
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(r);
                document.execCommand('copy');
                window.getSelection().removeAllRanges();
            };

            function cacheNotes() {
                let callNotes = document.getElementById('callNotes').innerHTML;
                var date = new Date();
                var time = date.toLocaleTimeString();
                newCall = '<div class="container">'
                                +'<tr>'
                                    +'<div style="float:left;width:100px;">'
                                        +'<span style="font-family:sans-serif;">'+time+'</span>'
                                        +'<button id="callLogCopyButton" onclick="copyCacheNotes('+ "'cacheNotes" +cacheVariable+"')" +'" style="width:50px; height:40px;">'
                                            +'<span style="font-size:28px;">ðŸ“„</span>'
                                        +'</button>'
                                    +'</div>'
                                    +'<div id="cacheNotes'+cacheVariable+'" type="input" style="text-align:justify;">'+ callNotes  +'</div>'
                                +'</tr>'
                            +'</div>';
                document.getElementById('call-log-box').innerHTML += newCall;
                cacheVariable += 1; 
            };
            function clearHistory() {
              document.getElementById('call-log-box').innerHTML = '';
              cacheVariable = 0;  
            };            
            document.addEventListener('DOMContentLoaded', Notes);   
        </script>   

    </head>

    <body>
        <div style="background-color: floralwhite; padding-top: 20px; padding-bottom: 10px;" align="center"><text style="font-size: 22px;">SSSIHMS-AIT</text></div>
        <div class="flex-container">
            <tr>
                <div id="info-form-box">
                    <div align="center"><h4 style="margin-top: 15px; margin-bottom: 15px;">Information Form</h4 ></div>
                    <div class="grid-container">
                        <div class="grid-item"><label>Language</label></div>
                        <div class="grid-item">
                            <select style="width:100px;" id="language" onchange="update()">
                                <option value="none" selected disabled>select</option>
                                <option value="Assamese">Assamese</option>
                                <option value="Bengali">Bengali</option>
                                <option value="English">English</option>
                                <option value="Gujarati">Gujarati</option>
                                <option value="Hindi">Hindi</option>
                                <option value="Kannada">Kannada</option>
                                <option value="Kashmiri">Kashmiri</option>
                                <option value="Malayalam">Malayalam</option>
                                <option value="Marathi">Marathi</option>
                                <option value="Odiya">Odiya</option>
                                <option value="Tamil">Tamil</option>
                            </select></div>
                        <div class="grid-item"><label><strong>FROM</strong></label></div>
                        <div class="grid-item">
                            <select style="margin-right:10px ;"id="FROM1" onchange="update()">
                                <option value="none" selected disabled>caller</option>
                                <option value="Attendant">Attendant</option>       
                                <option value="Patient">Patient</option>        
                            </select>
                            <select id="FROM2" onchange="update()">
                                <option value="none" selected disabled>Patient type</option>
                                <option value="New">New</option>
                                <option value="Revisit">Revisit</option>
                            </select>
                        </div>
                        <div class="grid-item"><label>Patient's Name</label></div>
                        <div class="grid-item"><input id="patientName" onchange="update()"style="width: 250px"></div>
                        <div class="grid-item"><label>Age</label></div>
                        <div class="grid-item"><input id="age" onchange="update()"style="width: 100px" ></div>
                        <div class="grid-item"><label>Gender</label></div>
                        <div class="grid-item">
                            <select id="gender" onchange="update()">
                                <option value="none" selected disabled>select</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                        <div class="grid-item"><label>Attendant Name</label></div>
                        <div class="grid-item"><input id="attender" onchange="update()"></div>
                        <div class="grid-item"><label>Relation</label></div>
                        <div class="grid-item"><input id="relation" onchange="update()"style="width: 150px"></div>
                        <div class="grid-item"><label>Hospital ID</label></div>
                        <div class="grid-item"><input id="hospitalID" onchange="update()" style="width: 150px"></div>
                        <div class="grid-item"><label>SHD ID</label></div>
                        <div class="grid-item"><input id="SHDID" onchange="update()"style="width: 150px"></div>
                        <div class="grid-item"><label>Place</label></div>
                        <div class="grid-item"><input id="place" onchange="update()"></div>
                        <div class="grid-item"><label>Phone Number</label></div>
                        <div class="grid-item"><input id="phoneNumber" onchange="update()" style="width: 150px"></div>
                        <div class="grid-item"><label>email id</label></div>
                        <div class="grid-item"><input id="emailID" onchange="update()" style="width: 250px"></div>
                        <div class="grid-item"><label><strong>DEPARTMENT</strong></label></div>
                        <div class="grid-item">
                            <select id="department" onchange="update()">
                                <option value="none" selected disabled>select</option>
                                <option value="Cardio">Cardio</option>
                                <option value="Neurosurgery">Neurosurgery</option>
                                <option value="Neurology">Neurology</option>
                                <option value="OBG">OBG</option>
                                <option value="ENT">ENT</option>
                                <option value="Ortho">Ortho</option>
                                <option value="CTVS">CTVS</option>
                                <option value="Dental">Dental</option>
                                <option value="Pediatrics">Pediatrics</option>
                                <option value="General Medicine">General Medicine</option>
                                <option value="General Surgery">General Surgery</option>
                            </select>
                        </div>
                        <div class="grid-item"><label>Symptoms</label></div>
                        <div class="grid-item">
                            <textarea id="symptoms" onchange="update()" style="width:340px;height: 110px ;"></textarea>
                        </div>
                        <div class="grid-item"><label><strong>RESPONSE</strong></label></div>
                        <div class="grid-item">
                            <textarea id="response" onchange="update()" style="width:340px;height: 70px ;"> </textarea>
                        </div>
                        <div class="grid-item"><label><strong>RESOLUTION</strong></label></div>
                        <div class="grid-item">
                            <select id="resolution" onchange="update()">
                                <option value="none" selected disabled>select</option>
                                <option value="Await Hospital Response"> Await Hospital Response</option>
                                <option value="Call back"> Call back</option>
                                <option value="Closed"> Closed</option>
                                <option value="Enquiry Appointment"> Enquiry Appointment</option>
                                <option value="Language Transfer"> Language Transfer</option>
                                <option value="Link sent"> Link sent</option>
                                <option value="Link to be sent"> Link to be sent</option>
                            </select>
                        </div>
                    </div>
                    <div align="center">    
                        <button onclick="clearEntries()">Clear Entry</button>
                    </div>                          
                </div>
                <div id="call-notes-box" >
                    <div align="center">
                        <h4 style="margin-top: 10px; margin-bottom: 10px;">Call Notes</h4>
                        <textarea id="callNotes"></textarea>
                    </div>
                    <div align="center">
                        <button onclick="copyNotes()">Copy</button>
                        <button onclick="cacheNotes()">Cache</button>
                    </div>
                    <h4 style="margin-top: 5px; margin-bottom: 5px;">Recent Calls</h4>
                    <div class="container" id="call-log-box">
                    </div>
                    <div align="center">
                        <button style="border-radius: 5px;margin: 5px; width: 100px; height: 40px;" onclick="clearHistory()">Clear History</button>
                    </div>   
                </div>
                
            </tr>
            <br />
        </div>
    </body>

</html>